<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="lib/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="lib/css/clean-zone-style.css"/>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:300,200,100' rel='stylesheet' type='text/css'>
    <title><%= title %></title>
    <style>
        .profile-avatar {
            box-shadow: 1px 1px 3px rgba(0,0,0,0.13);
        }
    </style>
</head>
<body style="opacity: 1; margin-left: 0px;">
<div id="cl-wrapper">
    <div class="container-fluid" id="pcont">
        <div class="cl-mcont">
            <div class="row">
                <div class="col-sm-2 col-md3"></div>
                <!-- Content goes here -->
                <div class="col-sm-8 col-md6">
                    <div class="block-flat profile-info" style="margin-bottom: 10px;">
                        <div class="row">
                            <div class="col-sm-2">
                                <div class="avatar">
                                    <img src='<%= songs[0].albumImage %>' class="profile-avatar">
                                </div>
                            </div>
                            <div class="col-sm-7">
                                <div class="personal">
                                    <h1 class="name"><%= songs[0].songName %></h1>
                                    <p class="description"><%= songs[0].album %></p>
                                    <p><%= songs[0].singer %></p>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <h1 class="big-text"><%= sum %></h1>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-md3"></div>
            </div>
            <div class="row">
                <div class="col-sm-2 col-md3"></div>
                <!-- Content goes here -->
                <div class="col-sm-8 col-md6">
                    <div class="block-flat">
                        <div class="header">
                            <h3>Song Score Date</h3>
                        </div>
                        <div class="content">
                            <div id="score_chart" style="height: 300px; padding: 0px; position: relative;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2 col-md3"></div>
            </div>
        </div>
    </div>
</div>

<script src="lib/js/jquery.min.js"></script>
<script src="lib/js/bootstrap.min.js"></script>
<script src="webjars/react/0.13.3/react.js"></script>
<script src="webjars/react/0.13.3/JSXTransformer.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script type="text/javascript">
    var graphApiUrl = "http://localhost:8080/api/graph?songId=" + '<%= songs[0].songId %>';
    $.getJSON(graphApiUrl, function(data) {
        drawChart(data);
    });


    var drawChart = function(data) {
        $('#score_chart').highcharts({
            title: {
                text: '<%= songs[0].songName %>',
                x: -20 //center
            },
            xAxis: {
                categories: data.keys
            },
            yAxis: {
                title: {
                    text: 'Melon Rank'
                },
                max: 100,
                min: 1,
                tickInterval: 20,
                reversed: true,
                reversedStacks: false,
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            tooltip: {
                valueSuffix: 'ìœ„'
            },
            series: data.values
        });
    };
</script>
</body>
</html>